let cardDeck = [
    {
        "name": "A_spades",
        "image": "./images/cards/A_spades.png",
        "value": 11
    },
    {
        "name": "2_spades",
        "image": "./images/cards/2_spades.png",
        "value": 2
    },
    {
        "name": "3_spades",
        "image": "./images/cards/3_spades.png",
        "value": 3
    },
    {
        "name": "4_spades",
        "image": "./images/cards/4_spades.png",
        "value": 4
    },
    {
        "name": "5_spades",
        "image": "./images/cards/5_spades.png",
        "value": 5
    },
    {
        "name": "6_spades",
        "image": "./images/cards/6_spades.png",
        "value": 6
    },
    {
        "name": "7_spades",
        "image": "./images/cards/7_spades.png",
        "value": 7
    },
    {
        "name": "8_spades",
        "image": "./images/cards/8_spades.png",
        "value": 8
    },
    {
        "name": "9_spades",
        "image": "./images/cards/9_spades.png",
        "value": 9
    },
    {
        "name": "10_spades",
        "image": "./images/cards/10_spades.png",
        "value": 10
    },
    {
        "name": "J_spades",
        "image": "./images/cards/J_spades.png",
        "value": 10
    },
    {
        "name": "Q_spades",
        "image": "./images/cards/Q_spades.png",
        "value": 10
    },
    {
        "name": "K_spades",
        "image": "./images/cards/K_spades.png",
        "value": 10
    },
    {
        "name": "A_clubs",
        "image": "./images/cards/A_clubs.png",
        "value": 11
    },
    {
        "name": "2_clubs",
        "image": "./images/cards/2_clubs.png",
        "value": 2
    },
    {
        "name": "3_clubs",
        "image": "./images/cards/3_clubs.png",
        "value": 3
    },
    {
        "name": "4_clubs",
        "image": "./images/cards/4_clubs.png",
        "value": 4
    },
    {
        "name": "5_clubs",
        "image": "./images/cards/5_clubs.png",
        "value": 5
    },
    {
        "name": "6_clubs",
        "image": "./images/cards/6_clubs.png",
        "value": 6
    },
    {
        "name": "7_clubs",
        "image": "./images/cards/7_clubs.png",
        "value": 7
    },
    {
        "name": "8_clubs",
        "image": "./images/cards/8_clubs.png",
        "value": 8
    },
    {
        "name": "9_clubs",
        "image": "./images/cards/9_clubs.png",
        "value": 9
    },
    {
        "name": "10_clubs",
        "image": "./images/cards/10_clubs.png",
        "value": 10
    },
    {
        "name": "J_clubs",
        "image": "./images/cards/J_clubs.png",
        "value": 10
    },
    {
        "name": "Q_clubs",
        "image": "./images/cards/Q_clubs.png",
        "value": 10
    },
    {
        "name": "K_clubs",
        "image": "./images/cards/K_clubs.png",
        "value": 10
    },
    {
        "name": "A_hearts",
        "image": "./images/cards/A_hearts.png",
        "value": 11
    },
    {
        "name": "2_hearts",
        "image": "./images/cards/2_hearts.png",
        "value": 2
    },
    {
        "name": "3_hearts",
        "image": "./images/cards/3_hearts.png",
        "value": 3
    },
    {
        "name": "4_hearts",
        "image": "./images/cards/4_hearts.png",
        "value": 4
    },
    {
        "name": "5_hearts",
        "image": "./images/cards/5_hearts.png",
        "value": 5
    },
    {
        "name": "6_hearts",
        "image": "./images/cards/6_hearts.png",
        "value": 6
    },
    {
        "name": "7_hearts",
        "image": "./images/cards/7_hearts.png",
        "value": 7
    },
    {
        "name": "8_hearts",
        "image": "./images/cards/8_hearts.png",
        "value": 8
    },
    {
        "name": "9_hearts",
        "image": "./images/cards/9_hearts.png",
        "value": 9
    },
    {
        "name": "10_hearts",
        "image": "./images/cards/10_hearts.png",
        "value": 10
    },
    {
        "name": "J_hearts",
        "image": "./images/cards/J_hearts.png",
        "value": 10
    },
    {
        "name": "Q_hearts",
        "image": "./images/cards/Q_hearts.png",
        "value": 10
    },
    {
        "name": "K_hearts",
        "image": "./images/cards/K_hearts.png",
        "value": 10
    },{
        "name": "A_diamonds",
        "image": "./images/cards/A_diamonds.png",
        "value": 11
    },
    {
        "name": "2_diamonds",
        "image": "./images/cards/2_diamonds.png",
        "value": 2
    },
    {
        "name": "3_diamonds",
        "image": "./images/cards/3_diamonds.png",
        "value": 3
    },
    {
        "name": "4_diamonds",
        "image": "./images/cards/4_diamonds.png",
        "value": 4
    },
    {
        "name": "5_diamonds",
        "image": "./images/cards/5_diamonds.png",
        "value": 5
    },
    {
        "name": "6_diamonds",
        "image": "./images/cards/6_diamonds.png",
        "value": 6
    },
    {
        "name": "7_diamonds",
        "image": "./images/cards/7_diamonds.png",
        "value": 7
    },
    {
        "name": "8_diamonds",
        "image": "./images/cards/8_diamonds.png",
        "value": 8
    },
    {
        "name": "9_diamonds",
        "image": "./images/cards/9_diamonds.png",
        "value": 9
    },
    {
        "name": "10_diamonds",
        "image": "./images/cards/10_diamonds.png",
        "value": 10
    },
    {
        "name": "J_diamonds",
        "image": "./images/cards/J_diamonds.png",
        "value": 10
    },
    {
        "name": "Q_diamonds",
        "image": "./images/cards/Q_diamonds.png",
        "value": 10
    },
    {
        "name": "K_diamonds",
        "image": "./images/cards/K_diamonds.png",
        "value": 10
    }
]

let player = {
    name: "Player 1",
    chips: 100
}

let firstCard
let secondCard

let cards = []
let sum = 0

let dealer_cards = []
let dealer_sum = 0

let hasBlackJack = false
let isAlive = false
let message = ""
let messageEl = document.getElementById("message-el")
let playerEl = document.getElementById("player-el")

let sumEl = document.getElementById("sum-el")
let cardsEl = document.getElementById("cards-el")


let dealerSumEl = document.getElementById("dealer_sum-el")
let dealerCardsEl = document.getElementById("dealer_cards-el")

let dealer_round = 0
let dealer_card1
let dealer_card2
let dealer_card3
let dealer_card4
let dealer_card5
let dealer_card6

playerEl.textContent = player.name + ": $" + player.chips

function getRandomCard() {
    let randomNumber = Math.floor( Math.random() * 13 ) + 1
    if (randomNumber > 10) {
        return 10
    } else if (randomNumber === 1) {
        return 11
    } else {
        return randomNumber
    }
}

function getRandomCardFromDeck() {
    let rnd = Math.floor( Math.random() * cardDeck.length )
    console.log(cardDeck.length)
    //console.log(cardDeck[rnd])
    //console.log(rnd)
    let card = cardDeck[rnd]
    //cardDeck.splice(rnd, 1)
     return card
}

function startGame() {
    isAlive = true
    hasBlackJack = false
    dealer_round = 0
    dealer_sum = 0
    dealer_card1 = undefined
    dealer_card2 = undefined
    dealer_card3 = undefined
    dealer_card4 = undefined
    dealer_card5 = undefined
    dealer_card6 = undefined
    firstCard = getRandomCardFromDeck()
    secondCard = getRandomCardFromDeck()
    cards = [firstCard, secondCard]
    sum = firstCard.value + secondCard.value
    dealer_cards = []
    dealer_sum = 0
    dealerSumEl.textContent = ""
    dealerCardsEl.textContent = ""
    renderGame()
}

function renderGame() {
    cardsEl.innerHTML = "Player 1 Cards: <br />"
    for (let i = 0; i < cards.length; i++) {
        cardsEl.innerHTML += `<img src="${cards[i].image}" />` + " "
    }
    
    sumEl.textContent = "Sum: " + sum
    if (sum <= 20) {
        message = "Click DRAW  -or-  DEALER PLAY"
    } else if (sum === 21) {
        message = "You win! Blackjack! Click DEAL!"
        hasBlackJack = true
        isAlive = false
        player.chips += 20
        playerEl.textContent = player.name + ": $" + (player.chips)
    } else if (player.chips <= 0) {
        message = "GAME OVER!  Click DEAL!"
        hasBlackJack = false
        isAlive = false
        playerEl.textContent = player.name + ": $" + (player.chips)
    } else {
        message = "BUST! Click DEAL!"
        isAlive = false
        player.chips -= 10
        playerEl.textContent = player.name + ": $" + (player.chips)
    }
    messageEl.textContent = message
}


function newCard() {
    if (isAlive === true && hasBlackJack === false && dealer_round < 1) {
        let card = getRandomCardFromDeck()
        sum += card.value
        cards.push(card)
        renderGame()        
    }
}


function dealerPlay() {
    if (isAlive === true) {
        messageEl.textContent = "Click DEALER PLAY" 
        if (dealer_card1 === undefined) {
            dealer_card1 = getRandomCardFromDeck()
        }
        if (dealer_card2 === undefined) {
            dealer_card2 = getRandomCardFromDeck()
        }
        if (dealer_card3 === undefined) {
            dealer_card3 = getRandomCardFromDeck()
        }
        if (dealer_card4 === undefined) {
            dealer_card4 = getRandomCardFromDeck()
        }
        if (dealer_card5 === undefined) {
            dealer_card5 = getRandomCardFromDeck()
        }
        if (dealer_card6 === undefined) {
            dealer_card6 = getRandomCardFromDeck()
        }
       
        let dealer_sum = dealer_card1.value + dealer_card2.value
        if (dealer_round === 0) {
            console.log("hold 0")
            dealer_sum = dealer_card1.value + dealer_card2.value
            dealer_cards = []
            dealer_cards.push(dealer_card1)
            dealer_cards.push(dealer_card2)
            dealer_round = 1
        } else if (dealer_sum <=19 && dealer_round === 1) {
            console.log("hold 1")
            dealer_sum = dealer_card1.value + dealer_card2.value
             + dealer_card3.value
            dealer_cards = []
            dealer_cards.push(dealer_card1)
            dealer_cards.push(dealer_card2)
            dealer_cards.push(dealer_card3)
            dealer_round = 2
        } else if (dealer_sum <=19 && dealer_round === 2) {
            console.log("hold 2")
            dealer_sum = dealer_card1.value + dealer_card2.value
             + dealer_card3.value + dealer_card4.value
            dealer_cards = []
            dealer_cards.push(dealer_card1)
            dealer_cards.push(dealer_card2)
            dealer_cards.push(dealer_card3)
            dealer_cards.push(dealer_card4)
            dealer_round = 3
        } else if (dealer_sum <=19 && dealer_round === 3) {
            console.log("hold 3")
            dealer_sum = dealer_card1.value + dealer_card2.value
             + dealer_card3.value + dealer_card4.value + dealer_card5.value
            dealer_cards = []
            dealer_cards.push(dealer_card1)
            dealer_cards.push(dealer_card2)
            dealer_cards.push(dealer_card3)
            dealer_cards.push(dealer_card4)
            dealer_cards.push(dealer_card5)
            dealer_round = 4
        } else if (dealer_sum <=19 && dealer_round === 4) {
            console.log("hold 3")
            dealer_sum = dealer_card1.value + dealer_card2.value + dealer_card3.value
             + dealer_card4.value + dealer_card5.value + dealer_card6.value
            dealer_cards = []
            dealer_cards.push(dealer_card1)
            dealer_cards.push(dealer_card2)
            dealer_cards.push(dealer_card3)
            dealer_cards.push(dealer_card4)
            dealer_cards.push(dealer_card5)
            dealer_cards.push(dealer_card6)
            dealer_round = 5
        }

        dealerCardsEl.innerHTML = "Dealer's Cards: <br />"
        for (let i = 0; i < dealer_cards.length; i++) {
            dealerCardsEl.innerHTML += `<img src="${dealer_cards[i].image}" />` + " " 
        }


        dealerSumEl.textContent = "Sum: " + dealer_sum
        if (dealer_sum === sum && dealer_sum >= 20) {
            messageEl.textContent = "Draw! Click DEAL!"
            isAlive = false
        } else if (dealer_sum > 21 || sum === 21) {
            messageEl.textContent = "You win! Dealer Bust! Click DEAL!"
            player.chips += 10
            playerEl.textContent = player.name + ": $" + (player.chips)
            isAlive = false            
        } else if (dealer_sum > sum) {
            messageEl.textContent = "Dealer wins! Click DEAL!"
            player.chips -= 10
            playerEl.textContent = player.name + ": $" + (player.chips)
            isAlive = false
        }  

        /*console.log("dealer card1 " + dealer_card1)
        console.log("dealer card2 " + dealer_card2)
        console.log("dealer card3 " + dealer_card3)
        console.log("dealer card4 " + dealer_card4)
        console.log("dealer card5 " + dealer_card5)
        console.log("dealer card6 " + dealer_card6)
        console.log("dealer_sum " + dealer_sum)
        console.log("dealer_round " + dealer_round)
        console.log("dealerCardsEl " + dealerCardsEl.innerHTML)
        console.log("dealer_cards " + dealer_cards)
        console.log("messageEl " + messageEl.textContent)
        console.log("isAlive " + isAlive)
        console.log("player.chips " + player.chips)
        console.log("------------------------------")*/
    }

   

    
}
